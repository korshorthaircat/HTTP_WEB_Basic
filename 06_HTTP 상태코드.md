# HTTP 상태코드
## HTTP 상태코드
* 클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능
* 종류
	* 1xx (Informational) - 거의 사용 X
	* 2xx (Successful) 
	* 3xx (Redirection)
	* 4xx (Client Error)
	* 5xx (Server Error)
* 만약 모르는 상태 코드가 나타나면?
	* 클라이언트는 상위 상태코드로 해석해 처리함
	* 미래에 새로운 상태코드가 추가되어도 클라이언트를 변경하지 않아도 됨 
	* 예)
		* 299 ??? —> 2xx 
		* 451 ??? —> 4xx

## 2xx - 성공
* **200 OK** 
	* 클라이언트의 요청을 성공적으로 처리함
* **201 Created** 
	* 요청 성공해서 새로운 리소스가 생성됨
	* 생성된 리소스는 응답 메시지의 Location 헤더 필드로 식별할 수 있음
* **202 Accepted**
	* 요청이 접수되었으나 처리가 완료되지 않음
	* 배치 처리 같은 곳에서 사용
		* 예) 요청 접수 후 1시간 뒤에 배치 프로세스가 요청을 처리함
* **204 No Content**
	* 서버가 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼 데이터가 없음
	* 결과 내용이 없어도 204 메시지(2xx)만으로 성공을 인식할 수 있음
		* 예) 웹 문서 편집기에서 save 버튼
			* save버튼이 결과로 아무 내용이 없어도 됨. 
			*  save버튼을 눌러도 같은 화면을 유지해야 함

## 3xx - 리다이렉션
* 리다이렉션의 이해
	* 웹 브라우저는 3xx의 응답 결과에 Location 헤더가 있으면 Location 위치로 자동 이동함(리다이렉트)
	* 예) 옛날 URL로 요청을 해도 새로 바뀐 URL로 자동 리다이렉트 된다.
* 리다이렉션의 종류
	* 영구 리다이렉션 - 301, 308
	* 일시 리다이렉션 - 302, 307, 303
	* 특수 리다이렉션

* 영구 리다이렉션
	* 리소스의 URI가 영구적으로 이동함 —> 원래의 URL 사용X, 검색 엔진 등에서도 변경 인지
	* **301 Moved Permanently**
		* 리다이렉트시 요청 메서드가  GET으로 변하고 메시지 본문이 제거될 수 있음
	* **308 Permanent Redirect**
		* 301과 기능은 같음
		* 리다이렉트시 요청 메서드의 본문을 유지함

* 일시 리다이렉션
	* 리소스의 URI가 일시적으로 변경됨 —> 따라서 검색엔진 등에서 URL을 변경하면 안됨
	* **302  Found**
		* 리다이렉트시 요청 메서드가 GET으로 변하고 메시지 본문이 제거될 수 있음
		* 실무에서는 대부분 302를 사용함
	* **307 Temporary Redirect**
		* 302와 기능은 같음
		* 리다이렉스시 요청 메서드의 본문을 유치함
	* **303 See Other**
		* 302와 기능은 같음
		* 리다이렉트시 요청 메서드가 GET으로 변경됨
	* PRG(Post/Redirect/Get) - 일시 리다이렉션의 예시
		*  POST로 주문 후에 새로 고침으로 인한 중복 주문 방지
		*  POST로 주문 후에 주문 결과 화면을 GET메서드로 리다이렉트함
		* 새로고침해도 결과 화면이 GET으로 리다이렉트됨. —> 사용성이 좋다!
	
* 기타 리다이렉션
	* 300 Multiple Choices - 안 쓴다
	* **304 Not Modified**
		* 캐시를 목적으로 사용함
		* 클라이언트에게 리소스가 수정되지 않았음을 알려줌 —> 클라이언트는 로컬 PC에 저장된 캐시를 재사용함(캐시로 리다이렉트)
		* 304 응답은 응답 에 메시지 바디를 포함하면 안됨(로컬 캐시를 사용해야 하므로)
		* 조건부 GET, HEAD 요청시 사용
		
## 4xx - 클라이언트 오류
* 클라이언트의 요청에 잘못된 문법 등으로 서버가 요청을 수행할 수 없음
* 오류의 원인이 클라이언트에게 있음 —> 클라이언트가 이미 잘못된 요청을 보내고 있으므로 똑같은 재시도가 실패함
* **400 Bad Request**
	* 클라이언트가 잘못된 요청을 해서 서버가 처리 불가
	* 요청 구문, 메시지 등의 오류
	* 예) 요청 파라미터가 잘못되거나 API 스펙이 맞지 않을 때
* **401 Unauthorized**
	* 클라이언트가 해당 리소스에 대한 인증이 필요함
	* 인증(Authentication)되지 않음
		* 오류 메시지가 ‘인가되지 않음(Unauthorized)’이지만, 이것은 명칭이 아쉽게 정해진 것일 뿐 ‘인증되지 않음’의 의미가 맞다. 
	* 참고
		* 인증(Authenticaton) - 본인이 누구인지 확인(로그인)
		* 인가(Authorization) - 권한 부여(ADMIN 권한처럼 특정 리소스에 접근할 수 있는 권한)
* **402 Forbidden**
	* 서버가 요청을 이해했지만 승인을 거부함
	* 인증 자격 증명은 있으나 접근 권한이 불충분한 경우
* **404 Not Found**
	* 요청 리소스를 찾을 수 없음
	* 혹은 클라이언트가 권한이 부족한 리소스에 접근할 때 해당 리소스를 숨기고 싶을 때

## 5xx - 서버 오류
* 서버 문제로 오류 발생 —> 재시도 하면 성공할 수도 있음
* **500 Internal Server Error**
	* 서버문제로 발생한 오류. 애매하면 500 오류!
* **503 Service Unavailable** 
	* 서버가 일서적 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없음
	* Retry-After 헤더 필드로 얼마 뒤에 복구되는지 보낼 수도 있음
	* 대부분의 서비스 장애는 예측하기 어려우므로 503을 보내는 경우는 잘 없다.
